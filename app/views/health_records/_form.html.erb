<%= form_with(model: health_record, class: "space-y-6 sm:space-y-8") do |form| %>
  <% if health_record.errors.any? %>
    <div id="error_explanation" class="alert alert-error mb-4">
      <h2 class="font-bold"><%= pluralize(health_record.errors.count, "件の") %>エラーがあります:</h2>
      <ul class="list-disc ml-6 mt-2">
        <% health_record.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <!-- 記録日 -->
  <div>
    <%= form.label :recorded_at, class: "block text-base sm:text-sm font-bold text-slate-700 mb-3" do %>
      記録日 <span class="text-red-500">*</span>
    <% end %>
    <%= form.date_field :recorded_at, required: true, class: "input-field w-full px-4 py-4 rounded-2xl text-slate-900 font-semibold mono" %>
    <p class="mt-2 text-sm text-slate-500">必須項目です</p>
  </div>

  <!-- 血圧（最高血圧 & 最低血圧） -->
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    <div>
      <%= form.label :systolic_pressure, "最高血圧（mmHg）", class: "block text-base sm:text-sm font-bold text-slate-700 mb-3" %>
      <%= form.number_field :systolic_pressure, min: 60, max: 250, placeholder: "120", inputmode: "numeric", class: "input-field w-full px-4 py-4 rounded-2xl text-slate-900 mono text-lg" %>
      <p class="mt-2 text-xs text-slate-500">正常範囲: 90-140 mmHg</p>
    </div>

    <div>
      <%= form.label :diastolic_pressure, "最低血圧（mmHg）", class: "block text-base sm:text-sm font-bold text-slate-700 mb-3" %>
      <%= form.number_field :diastolic_pressure, min: 40, max: 150, placeholder: "80", inputmode: "numeric", class: "input-field w-full px-4 py-4 rounded-2xl text-slate-900 mono text-lg" %>
      <p class="mt-2 text-xs text-slate-500">正常範囲: 60-90 mmHg</p>
    </div>
  </div>

  <!-- 心拍数 & 体温 -->
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    <div>
      <%= form.label :heart_rate, "心拍数（bpm）", class: "block text-base sm:text-sm font-bold text-slate-700 mb-3" %>
      <%= form.number_field :heart_rate, min: 0, placeholder: "72", inputmode: "numeric", class: "input-field w-full px-4 py-4 rounded-2xl text-slate-900 mono text-lg" %>
    </div>

    <div>
      <%= form.label :body_temperature, "体温（℃）", class: "block text-base sm:text-sm font-bold text-slate-700 mb-3" %>
      <%= form.number_field :body_temperature, step: 0.1, min: 34.0, max: 42.0, placeholder: "36.4", inputmode: "decimal", class: "input-field w-full px-4 py-4 rounded-2xl text-slate-900 mono text-lg" %>
      <p class="mt-2 text-xs text-slate-500">正常範囲: 36.0-37.5℃</p>
    </div>
  </div>

  <!-- 睡眠時間 & 体重 -->
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    <div>
      <%= form.label :sleep_hours, "睡眠時間（時間）", class: "block text-base sm:text-sm font-bold text-slate-700 mb-3" %>
      <%= form.number_field :sleep_hours, step: 0.5, min: 0, placeholder: "7.5", inputmode: "decimal", class: "input-field w-full px-4 py-4 rounded-2xl text-slate-900 mono text-lg" %>
    </div>

    <div>
      <%= form.label :weight, "体重（kg）", class: "block text-base sm:text-sm font-bold text-slate-700 mb-3" %>
      <%= form.number_field :weight, step: 0.1, min: 0, placeholder: "65.5", inputmode: "decimal", class: "input-field w-full px-4 py-4 rounded-2xl text-slate-900 mono text-lg" %>
    </div>
  </div>

  <!-- 運動時間 & 歩数 -->
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
    <div>
      <%= form.label :exercise_minutes, "運動時間（分）", class: "block text-base sm:text-sm font-bold text-slate-700 mb-3" %>
      <%= form.number_field :exercise_minutes, min: 0, placeholder: "30", inputmode: "numeric", class: "input-field w-full px-4 py-4 rounded-2xl text-slate-900 mono text-lg" %>
    </div>

    <div>
      <%= form.label :steps, "歩数", class: "block text-base sm:text-sm font-bold text-slate-700 mb-3" %>
      <%= form.number_field :steps, min: 0, placeholder: "8500", inputmode: "numeric", class: "input-field w-full px-4 py-4 rounded-2xl text-slate-900 mono text-lg" %>
    </div>
  </div>

  <!-- 体調スコア -->
  <div>
    <%= form.label :mood, "体調スコア", class: "block text-base sm:text-sm font-bold text-slate-700 mb-4" %>
    <div class="grid grid-cols-2 sm:grid-cols-5 gap-3 sm:gap-3">
      <label class="mood-option">
        <%= form.radio_button :mood, 1, class: "sr-only" %>
        <div class="border-3 border-slate-200 rounded-2xl p-4 sm:p-4 text-center flex flex-col items-center justify-center">
          <div class="text-4xl sm:text-3xl mb-2">😞</div>
          <div class="text-sm sm:text-xs font-bold text-slate-700">とても悪い</div>
        </div>
      </label>
      <label class="mood-option">
        <%= form.radio_button :mood, 2, class: "sr-only" %>
        <div class="border-3 border-slate-200 rounded-2xl p-4 sm:p-4 text-center flex flex-col items-center justify-center">
          <div class="text-4xl sm:text-3xl mb-2">😕</div>
          <div class="text-sm sm:text-xs font-bold text-slate-700">悪い</div>
        </div>
      </label>
      <label class="mood-option">
        <%= form.radio_button :mood, 3, class: "sr-only" %>
        <div class="border-3 border-slate-200 rounded-2xl p-4 sm:p-4 text-center flex flex-col items-center justify-center">
          <div class="text-4xl sm:text-3xl mb-2">😐</div>
          <div class="text-sm sm:text-xs font-bold text-slate-700">普通</div>
        </div>
      </label>
      <label class="mood-option">
        <%= form.radio_button :mood, 4, class: "sr-only" %>
        <div class="border-3 border-slate-200 rounded-2xl p-4 sm:p-4 text-center flex flex-col items-center justify-center">
          <div class="text-4xl sm:text-3xl mb-2">😊</div>
          <div class="text-sm sm:text-xs font-bold text-slate-700">良い</div>
        </div>
      </label>
      <label class="mood-option col-span-2 sm:col-span-1">
        <%= form.radio_button :mood, 5, class: "sr-only" %>
        <div class="border-3 border-slate-200 rounded-2xl p-4 sm:p-4 text-center flex flex-col items-center justify-center">
          <div class="text-4xl sm:text-3xl mb-2">😄</div>
          <div class="text-sm sm:text-xs font-bold text-slate-700">とても良い</div>
        </div>
      </label>
    </div>
  </div>

  <!-- メモ -->
  <div>
    <%= form.label :notes, "メモ", class: "block text-base sm:text-sm font-bold text-slate-700 mb-3" %>
    <%= form.text_area :notes, rows: 4, placeholder: "今日の調子や気になったことを記録...", class: "input-field w-full px-4 py-4 rounded-2xl text-slate-900 text-base resize-none" %>
  </div>

  <!-- アクションボタン -->
  <div class="flex flex-col sm:flex-row justify-end gap-3 sm:gap-4 pt-6 border-t border-slate-200">
    <%= link_to "キャンセル", health_records_path, class: "w-full sm:w-auto text-center px-8 py-4 border-2 border-slate-300 rounded-2xl text-slate-700 hover:bg-slate-50 font-bold transition-colors order-2 sm:order-1" %>
    <%= form.submit health_record.new_record? ? "記録を保存" : "記録を更新", class: "w-full sm:w-auto btn-primary px-8 py-4 text-white rounded-2xl font-bold text-lg order-1 sm:order-2" %>
  </div>
<% end %>
