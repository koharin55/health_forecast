<%= form_with(model: health_record, class: "bg-white shadow-md rounded-lg p-6") do |form| %>
  <% if health_record.errors.any? %>
    <div id="error_explanation" class="bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
      <h2 class="font-bold"><%= pluralize(health_record.errors.count, "件の") %>エラーがあります:</h2>
      <ul class="list-disc ml-6 mt-2">
        <% health_record.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <%= form.label :recorded_at, "記録日", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.date_field :recorded_at, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
    </div>

    <div>
      <%= form.label :weight, "体重 (kg)", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.number_field :weight, step: 0.1, placeholder: "例: 65.5", class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
    </div>

    <div>
      <%= form.label :sleep_hours, "睡眠時間 (時間)", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.number_field :sleep_hours, step: 0.1, placeholder: "例: 7.5", class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
    </div>

    <div>
      <%= form.label :exercise_minutes, "運動時間 (分)", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.number_field :exercise_minutes, placeholder: "例: 30", class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
    </div>

    <div>
      <%= form.label :mood, "体調スコア (1-5)", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.select :mood, options_for_select([[nil, "選択してください"], [1, "1 - とても悪い"], [2, "2 - 悪い"], [3, "3 - 普通"], [4, "4 - 良い"], [5, "5 - とても良い"]], health_record.mood), {}, class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
    </div>

    <div>
      <%= form.label :steps, "歩数", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.number_field :steps, placeholder: "例: 8000", class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
      <p class="text-xs text-gray-500 mt-1">※将来的にHealthKitから自動取得予定</p>
    </div>

    <div>
      <%= form.label :heart_rate, "心拍数 (bpm)", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.number_field :heart_rate, placeholder: "例: 70", class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
      <p class="text-xs text-gray-500 mt-1">※将来的にHealthKitから自動取得予定</p>
    </div>
  </div>

  <div class="mt-6">
    <%= form.label :notes, "メモ", class: "block text-sm font-medium text-gray-700 mb-2" %>
    <%= form.text_area :notes, rows: 4, placeholder: "体調や気分、その日の出来事などを自由に記録できます", class: "block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
  </div>

  <div class="mt-6 flex gap-3">
    <%= form.submit health_record.new_record? ? "記録を追加" : "記録を更新", class: "bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-md cursor-pointer" %>
    <%= link_to "キャンセル", health_records_path, class: "bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold px-6 py-3 rounded-md" %>
  </div>
<% end %>
