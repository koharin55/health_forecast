<div class="w-full">
  <!-- Header -->
  <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6">
    <h1 class="text-3xl font-bold text-gray-800">üìã ÂÅ•Â∫∑Ë®òÈå≤‰∏ÄË¶ß</h1>
    <%= link_to new_health_record_path, class: "btn-primary w-full md:w-auto" do %>
      <span>‚ûï Êñ∞„Åó„ÅÑË®òÈå≤„ÇíËøΩÂä†</span>
    <% end %>
  </div>

  <% if @health_records.any? %>
    <!-- „É¢„Éê„Ç§„É´Ôºö„Ç´„Éº„Éâ„Éì„É•„Éº -->
    <div class="grid grid-cols-1 md:hidden gap-4">
      <% @health_records.each do |record| %>
        <div class="card p-5">
          <div class="flex justify-between items-start mb-4">
            <div>
              <div class="text-lg font-bold text-gray-800 mono">
                <%= record.recorded_at.strftime("%Y-%m-%d") %>
              </div>
              <div class="text-xs text-gray-500 mt-1">
                <%= record.recorded_at.strftime("%A") %>
              </div>
            </div>
            <% if record.mood.present? %>
              <span class="<%= mood_badge_class(record.mood) %>">
                <%= mood_emoji(record.mood) %>
                <%= mood_text(record.mood) %>
              </span>
            <% end %>
          </div>

          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-white bg-opacity-50 rounded-lg p-3">
              <div class="text-xs text-gray-500 mb-1">‰ΩìÈáç</div>
              <div class="text-lg font-bold text-gray-800 mono">
                <%= record.weight.present? ? "#{record.weight}" : "‚ûñ" %>
                <% if record.weight.present? %>
                  <span class="text-xs text-gray-500 font-normal">kg</span>
                <% end %>
              </div>
            </div>

            <div class="bg-white bg-opacity-50 rounded-lg p-3">
              <div class="text-xs text-gray-500 mb-1">Áù°Áú†</div>
              <div class="text-lg font-bold text-gray-800 mono">
                <%= record.sleep_hours.present? ? "#{record.sleep_hours}" : "‚ûñ" %>
                <% if record.sleep_hours.present? %>
                  <span class="text-xs text-gray-500 font-normal">h</span>
                <% end %>
              </div>
            </div>

            <div class="bg-white bg-opacity-50 rounded-lg p-3">
              <div class="text-xs text-gray-500 mb-1">ÈÅãÂãï</div>
              <div class="text-lg font-bold text-gray-800 mono">
                <%= record.exercise_minutes.present? ? "#{record.exercise_minutes}" : "‚ûñ" %>
                <% if record.exercise_minutes.present? %>
                  <span class="text-xs text-gray-500 font-normal">ÂàÜ</span>
                <% end %>
              </div>
            </div>

            <div class="bg-white bg-opacity-50 rounded-lg p-3">
              <div class="text-xs text-gray-500 mb-1">Ê≠©Êï∞</div>
              <div class="text-lg font-bold text-gray-800 mono">
                <%= record.steps.present? ? number_with_delimiter(record.steps) : "‚ûñ" %>
              </div>
            </div>
          </div>

          <div class="flex gap-2">
            <%= link_to "Ë©≥Á¥∞", record, class: "btn-secondary flex-1 text-center text-sm py-2" %>
            <%= link_to "Á∑®ÈõÜ", edit_health_record_path(record), class: "btn-primary flex-1 text-center text-sm py-2" %>
            <%= button_to "ÂâäÈô§", record, method: :delete,
                class: "flex-1 text-sm py-2 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-xl transition",
                form: { class: "flex-1" },
                data: { turbo_confirm: "Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü" } %>
          </div>
        </div>
      <% end %>
    </div>

    <!-- „Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÔºö„ÉÜ„Éº„Éñ„É´„Éì„É•„Éº -->
    <div class="card hidden md:block overflow-hidden">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50 bg-opacity-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Êó•‰ªò</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‰ΩìÈáç</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Áù°Áú†</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ÈÅãÂãï</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ê≠©Êï∞</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ÂøÉÊãçÊï∞</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‰ΩìË™ø</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Êìç‰Ωú</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200">
            <% @health_records.each do |record| %>
              <tr class="hover:bg-gray-50 hover:bg-opacity-50 transition">
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium mono">
                  <%= record.recorded_at.strftime("%Y-%m-%d") %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 mono">
                  <%= record.weight.present? ? "#{record.weight} kg" : "‚ûñ" %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 mono">
                  <%= record.sleep_hours.present? ? "#{record.sleep_hours}h" : "‚ûñ" %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 mono">
                  <%= record.exercise_minutes.present? ? "#{record.exercise_minutes}ÂàÜ" : "‚ûñ" %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 mono">
                  <%= record.steps.present? ? number_with_delimiter(record.steps) : "‚ûñ" %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 mono">
                  <%= record.heart_rate.present? ? "#{record.heart_rate} bpm" : "‚ûñ" %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                  <% if record.mood.present? %>
                    <span class="<%= mood_badge_class(record.mood) %>">
                      <%= mood_emoji(record.mood) %>
                      <%= mood_text(record.mood) %>
                    </span>
                  <% else %>
                    ‚ûñ
                  <% end %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                  <%= link_to "Ë©≥Á¥∞", record, class: "text-emerald-600 hover:text-emerald-900" %>
                  <%= link_to "Á∑®ÈõÜ", edit_health_record_path(record), class: "text-cyan-600 hover:text-cyan-900" %>
                  <%= button_to "ÂâäÈô§", record, method: :delete,
                      class: "inline text-red-600 hover:text-red-900",
                      form: { class: "inline" },
                      data: { turbo_confirm: "Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü" } %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  <% else %>
    <div class="card p-12">
      <p class="text-gray-600 text-center">
        „Åæ„Å†Ë®òÈå≤„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ<%= link_to "ÊúÄÂàù„ÅÆË®òÈå≤„ÇíËøΩÂä†", new_health_record_path, class: "text-emerald-600 hover:text-emerald-900 font-semibold" %>„Åó„Åæ„Åó„Çá„ÅÜÔºÅ
      </p>
    </div>
  <% end %>
</div>
